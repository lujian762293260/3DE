下载安装包
apr-1.7.0.tar.gz
apr-util-1.6.1.tar.gz
httpd-2.4.41.tar.gz
2. 编译安装
安装gcc、pcre
#yum install -y gcc
#yum install -y pcre-devel
安装apr
#tar zxvf apr-1.7.0.tar.gz
#cd apr-1.7.0/
#./configure --prefix=/usr/local/apr (--prefix指定apr安装的目录)
#make && make install
提示 rm: cannot remove 'libtoolT': No such file or directory
1. vi configure
2. 找到RM='$RM'修改为RM='$RM -f'
安装libxml2-devel (apr-util依赖，否则编译Apache提示缺少XML相关依赖)
#yum install -y libxml2-devel
安装apr-util
#tar zxvf apr-util-1.6.1.tar.gz
#cd apr-util-1.6.1/
#./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr
#make && make install
更新openssl至最新LTS版本，链接
编译Apache
#tar zxvf httpd-2.4.41.tar.gz
#cd httpd-2.4.41/
#./configure \
--with-apr=/usr/local/apr \
--with-apr-util=/usr/local/apr-util \
--with-ssl=/usr/local/openssl \
--prefix=/app/apache \
--sysconfdir=/app/apache/conf \
--enable-so \
--enable-ssl \
--enable-cgi \
--enable-rewrite \
--with-zlib \
--with-pcre \
--with-mpm=prefork \
--enable-modules=most \
--enable-mpms-shared=all
#make && make install

编译参数说明
--prefix=/app/apache \ #安装目录
--sysconfdir=/app/apache/conf \ #配置文件存储目录
--enable-so \ #启动模块动态装卸载
--enable-ssl \ #编译ssl模块
--enable-cgi \ #支持cgi机制
--enable-rewrite \ #支持url重写
--with-zlib \ #支持数据包压缩
--with-pcre \ #支持正则表达式
--with-mpm=prefork \ #指明httpd的工作方式为prefork
--enable-modules=most \ #启用的模块
--enable-mpms-shared=all #以共享方式编译的模块
